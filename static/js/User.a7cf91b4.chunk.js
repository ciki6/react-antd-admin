(this.webpackJsonpreact_antd_admin=this.webpackJsonpreact_antd_admin||[]).push([[29],{1450:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=a(9),l=function(e,t){return n.createElement(i.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="EditOutlined";t.a=n.forwardRef(l)},1451:function(e,t,a){"use strict";var n=a(0),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=a(9),l=function(e,t){return n.createElement(i.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="DeleteOutlined";t.a=n.forwardRef(l)},1472:function(e,t,a){"use strict";a.r(t);a(562);var n=a(563),r=a.n(n),i=(a(243),a(117)),l=a.n(i),c=(a(89),a(67)),s=a.n(c),o=(a(130),a(51)),d=a.n(o),u=a(895),m=a.n(u);function h(e,t,a,n,r,i,l){try{var c=e[i](l),s=c.value}catch(o){return void a(o)}c.done?t(s):Promise.resolve(s).then(n,r)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function l(e){h(i,n,r,l,c,"next",e)}function c(e){h(i,n,r,l,c,"throw",e)}l(void 0)}))}}var f=a(53),v=a(54),b=a(66),E=a(65),y=(a(602),a(603)),g=a.n(y),O=a(0),U=a.n(O),k=a(1450),w=a(1451),j=a(177),C=a(556),M=(a(172),a(106)),I=a.n(M),D=(a(620),a(604)),L=a.n(D),x=(a(239),a(95)),V=a.n(x),R=(a(240),a(133)),F=a.n(R),A=F.a.TextArea,S=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onOk,r=e.form,i=e.confirmLoading,l=e.currentRowData,c=r.getFieldDecorator,s=l.id,o=l.name,d=l.role,u=l.description,m={labelCol:{sm:{span:4}},wrapperCol:{sm:{span:16}}};return U.a.createElement(I.a,{title:"\u7f16\u8f91",visible:t,onCancel:a,onOk:n,confirmLoading:i},U.a.createElement(V.a,m,U.a.createElement(V.a.Item,{label:"\u7528\u6237ID:"},c("id",{initialValue:s})(U.a.createElement(F.a,{disabled:!0}))),U.a.createElement(V.a.Item,{label:"\u7528\u6237\u540d\u79f0:"},c("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0!"}],initialValue:o})(U.a.createElement(F.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"}))),U.a.createElement(V.a.Item,{label:"\u7528\u6237\u89d2\u8272:"},c("role",{initialValue:d})(U.a.createElement(L.a,{style:{width:120},disabled:"admin"===s},U.a.createElement(L.a.Option,{value:"admin"},"admin"),U.a.createElement(L.a.Option,{value:"editor"},"editor"),U.a.createElement(L.a.Option,{value:"guest"},"guest")))),U.a.createElement(V.a.Item,{label:"\u7528\u6237\u63cf\u8ff0:"},c("description",{initialValue:u})(U.a.createElement(A,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u63cf\u8ff0"})))))}}]),a}(O.Component),z=V.a.create({name:"EditUserForm"})(S),N=F.a.TextArea,T=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).validatUserID=function(){var e=p(m.a.mark((function e(t,a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return/^[a-zA-Z0-9]{1,6}$/.test(a)||n("\u7528\u6237ID\u5fc5\u987b\u4e3a1-6\u4f4d\u6570\u5b57\u6216\u5b57\u6bcd\u7ec4\u5408"),e.next=4,Object(j.f)(a);case 4:r=e.sent,r.data.status&&n("\u8be5\u7528\u6237ID\u5df2\u5b58\u5728"),e.next=10;break;case 9:n("\u8bf7\u8f93\u5165\u7528\u6237ID");case 10:n();case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onOk,r=e.form,i=e.confirmLoading,l=r.getFieldDecorator,c={labelCol:{sm:{span:4}},wrapperCol:{sm:{span:16}}};return U.a.createElement(I.a,{title:"\u7f16\u8f91",visible:t,onCancel:a,onOk:n,confirmLoading:i},U.a.createElement(V.a,c,U.a.createElement(V.a.Item,{label:"\u7528\u6237ID:"},l("id",{rules:[{required:!0,validator:this.validatUserID}]})(U.a.createElement(F.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237ID"}))),U.a.createElement(V.a.Item,{label:"\u7528\u6237\u540d\u79f0:"},l("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0!"}]})(U.a.createElement(F.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"}))),U.a.createElement(V.a.Item,{label:"\u7528\u6237\u89d2\u8272:"},l("role",{initialValue:"admin"})(U.a.createElement(L.a,{style:{width:120}},U.a.createElement(L.a.Option,{value:"admin"},"admin"),U.a.createElement(L.a.Option,{value:"guest"},"guest")))),U.a.createElement(V.a.Item,{label:"\u7528\u6237\u63cf\u8ff0:"},l("description",{})(U.a.createElement(N,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u63cf\u8ff0"})))))}}]),a}(O.Component),H=V.a.create({name:"AddUserForm"})(T),_=g.a.Column,q=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={users:[],editUserModalVisible:!1,editUserModalLoading:!1,currentRowData:{},addUserModalVisible:!1,addUserModalLoading:!1},e.getUsers=p(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.d)();case 2:a=t.sent,n=a.data,r=n.users,0===n.status&&e.setState({users:r});case 5:case"end":return t.stop()}}),t)}))),e.handleEditUser=function(t){e.setState({currentRowData:Object.assign({},t),editUserModalVisible:!0})},e.handleDeleteUser=function(t){var a=t.id;"admin"!==a?Object(j.b)({id:a}).then((function(t){d.a.success("\u5220\u9664\u6210\u529f"),e.getUsers()})):d.a.error("\u4e0d\u80fd\u5220\u9664\u7ba1\u7406\u5458\u7528\u6237\uff01")},e.handleEditUserOk=function(t){var a=e.editUserFormRef.props.form;a.validateFields((function(t,n){t||(e.setState({editModalLoading:!0}),Object(j.c)(n).then((function(t){a.resetFields(),e.setState({editUserModalVisible:!1,editUserModalLoading:!1}),d.a.success("\u7f16\u8f91\u6210\u529f!"),e.getUsers()})).catch((function(e){d.a.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")})))}))},e.handleCancel=function(t){e.setState({editUserModalVisible:!1,addUserModalVisible:!1})},e.handleAddUser=function(t){e.setState({addUserModalVisible:!0})},e.handleAddUserOk=function(t){var a=e.addUserFormRef.props.form;a.validateFields((function(t,n){t||(e.setState({addUserModalLoading:!0}),Object(j.a)(n).then((function(t){a.resetFields(),e.setState({addUserModalVisible:!1,addUserModalLoading:!1}),d.a.success("\u6dfb\u52a0\u6210\u529f!"),e.getUsers()})).catch((function(e){d.a.success("\u6dfb\u52a0\u5931\u8d25,\u8bf7\u91cd\u8bd5!")})))}))},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state.users,a=U.a.createElement("span",null,U.a.createElement(s.a,{type:"primary",onClick:this.handleAddUser},"\u6dfb\u52a0\u7528\u6237"));return U.a.createElement("div",{className:"app-container"},U.a.createElement(C.a,{title:"\u7528\u6237\u7ba1\u7406",source:"\u5728\u8fd9\u91cc\uff0c\u4f60\u53ef\u4ee5\u5bf9\u7cfb\u7edf\u4e2d\u7684\u7528\u6237\u8fdb\u884c\u7ba1\u7406\uff0c\u4f8b\u5982\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7528\u6237\uff0c\u6216\u8005\u4fee\u6539\u7cfb\u7edf\u4e2d\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237\u3002"}),U.a.createElement("br",null),U.a.createElement(r.a,{title:a},U.a.createElement(g.a,{bordered:!0,rowKey:"id",dataSource:t,pagination:!1},U.a.createElement(_,{title:"\u7528\u6237ID",dataIndex:"id",key:"id",align:"center"}),U.a.createElement(_,{title:"\u7528\u6237\u540d\u79f0",dataIndex:"name",key:"name",align:"center"}),U.a.createElement(_,{title:"\u7528\u6237\u89d2\u8272",dataIndex:"role",key:"role",align:"center"}),U.a.createElement(_,{title:"\u7528\u6237\u63cf\u8ff0",dataIndex:"description",key:"description",align:"center"}),U.a.createElement(_,{title:"\u64cd\u4f5c",key:"action",width:195,align:"center",render:function(t,a){return U.a.createElement("span",null,U.a.createElement(s.a,{type:"primary",shape:"circle",icon:U.a.createElement(k.a,null),title:"\u7f16\u8f91",onClick:e.handleEditUser.bind(null,a)}),U.a.createElement(l.a,{type:"vertical"}),U.a.createElement(s.a,{type:"primary",shape:"circle",icon:U.a.createElement(w.a,null),title:"\u5220\u9664",onClick:e.handleDeleteUser.bind(null,a)}))}}))),U.a.createElement(z,{currentRowData:this.state.currentRowData,wrappedComponentRef:function(t){return e.editUserFormRef=t},visible:this.state.editUserModalVisible,confirmLoading:this.state.editUserModalLoading,onCancel:this.handleCancel,onOk:this.handleEditUserOk}),U.a.createElement(H,{wrappedComponentRef:function(t){return e.addUserFormRef=t},visible:this.state.addUserModalVisible,confirmLoading:this.state.addUserModalLoading,onCancel:this.handleCancel,onOk:this.handleAddUserOk}))}}]),a}(O.Component);t.default=q},556:function(e,t,a){"use strict";a(562);var n=a(563),r=a.n(n),i=a(0),l=a.n(i),c=a(53),s=a(54),o=function(){function e(t){Object(c.a)(this,e),this.opts=t||{},this.source=t.source,this.output=t.output,this.delay=t.delay||120,this.chain={parent:null,dom:this.output,val:[]},"function"!==typeof this.opts.done&&(this.opts.done=function(){})}return Object(s.a)(e,[{key:"init",value:function(){this.chain.val=this.convert(this.source,this.chain.val)}},{key:"convert",value:function(e,t){for(var a=Array.from(e.childNodes),n=0;n<a.length;n++){var r=a[n];if(3===r.nodeType)t=t.concat(r.nodeValue.split(""));else if(1===r.nodeType){var i=[];i=this.convert(r,i),t.push({dom:r,val:i})}}return t}},{key:"print",value:function(e,t,a){setTimeout((function(){e.appendChild(document.createTextNode(t)),a()}),this.delay)}},{key:"play",value:function(e){var t=this;if(e.val.length){var a=e.val.shift();if("string"===typeof a)this.print(e.dom,a,(function(){t.play(e)}));else{var n=a.dom.cloneNode();e.dom.appendChild(n),this.play({parent:e,dom:n,val:a.val})}}else e.parent?this.play(e.parent):this.opts.done()}},{key:"start",value:function(){this.init(),this.play(this.chain)}}]),e}(),d=function(e){var t=e.title,a=e.source,n=Object(i.useRef)(),c=Object(i.useRef)();return Object(i.useEffect)((function(){new o({source:n.current,output:c.current,delay:30}).start()}),[]),l.a.createElement(r.a,{bordered:!1,className:"card-item",title:t},l.a.createElement("div",{style:{display:"none"},ref:n,dangerouslySetInnerHTML:{__html:a}}),l.a.createElement("div",{ref:c}))};d.defaultProps={title:"",source:""};t.a=d},895:function(e,t,a){e.exports=a(251)}}]);